<!DOCTYPE html>
<html lang="zh-cn">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="shortcut icon" href="../images/clay.png" type="image/x-png">
    <title>clay - 实例</title>
    <link rel="stylesheet" href="../easycss-1.2.1.min.css">
    <link rel="stylesheet" href="../style.css">
    <link rel="stylesheet" href="./style.css">
    <script>
        function goto(target) {
            window.location.href = target;
        }
    </script>
</head>

<body>
    <header id='top'>
        clay v1.2.4
        <ul>
            <li>
                <a href="../index.html">首页</a>
            </li>
            <li>
                <a href="../examples/index.html">实例</a>
            </li>
            <li>
                <a href="../component/index.html">组件库</a>
            </li>
            <li>
                <a href="../apis/index.html">文档</a>
            </li>
            <li>
                <a href="./index.html" class='click'>教程</a>
            </li>
            <li>
                <a href="../aboutUs.html">加入我们</a>
            </li>
        </ul>
        <a href="https://github.com/yelloxing/clay" class="github">
            Fork me on GitHub
        </a>
    </header>
    <section>
        <nav>
            <ul>
                <li onclick="goto('#what')">什么是clay?</li>
                <li onclick="goto('#node-data')">数据和结点绑定</li>
                <li onclick="goto('#layer-tree')">树布局</li>
            </ul>
        </nav>
        <article>
            <h2 id='what'>什么是clay?</h2>
            <p>
                用一句话描述就是：它是一堆经过设计的，专门用以web端绘图的API集合。
            </p>
            <p>
                不过，并不完全是简单的API集合，在接口层面进行了分层，主要分为：结点层、计算层、工具层、绘图层和布局层。
            </p>
            <p>
                每一层具体的调用API可以在文档中查看，这里主要针对比较典型的接口进行举例说明。
            </p>
            <h2 id='node-data'>数据和结点绑定</h2>
            <p>
                通过把数据和结点绑定起来，在修改结点的属性或获取选中条目后想查看具体信息的时候非常方便，比如我们有下面的条形图：
            </p>
            <img src="../examples/Bar-graph.png">
            <p>
                现在有一个需求，你希望根据销售情况修改每个条形的样式，如果你已经完成了数据和结点的绑定，可以这样实现：
            </p>
            <pre class="code">
$$('path').css('background-color',function(data){
    //其中data就是条目对应的绑定数据，这里是销售情况
});</pre>
            <p>
                除此之外，设置属性，或者直接根据结点获取绑定的值都非常方便。
            </p>
            <p>
                关于结点和数据的操作还有很多，比如绑定数据时数据和结点不一样多时，如何补齐等，请在文档中查看。
            </p>
            <h2 id="layer-tree">
                树布局
            </h2>
            <p>
                布局需要解决的问题是位置的计算，树布局设计的方法是：无论最终需要展示的效果是怎么样的，计算后返回的结点记录的位置都是按照下面的效果计算：
            </p>
            <img src="./tree-design.jpg">
            <p>
                计算的时候，假定每个结点都是1*1的正方形，具体效果需要修改计算，因此可以知道计算后Canvas的元素位置应该是top=1，left=2.5，如下是运行截图：
            </p>
            <img src="./tree-node.png">
            <p>
                在截图中可以看见还有一个属性show，其表示该结点是否显示，如果是false表示不显示，也就会导致计算的时候忽略其位置，这是为了在不删除结点的情况下实现类似toggle显示隐藏添加的内部属性。
            </p>
            <p>
                这里只是说明了树布局的设计思想，具体用法或更多接口请查看文档。
            </p>
        </article>
    </section>
    <footer>
        心叶 &copy;2007-2018 走一步，再走一步
        <a href="#top">回到顶部</a>
    </footer>
</body>
<script>
    window.setTimeout(function () {
        var target = /(#.*)/.exec(window.location.href + "");
        if (target) window.location.href = target[1];
    }, 200);
</script>

</html>
